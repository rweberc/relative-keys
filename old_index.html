<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Piano Keyboard</title>
    <style>
        .piano {
            display: flex;
            align-items: flex-start;
        }
        .white-key, .black-key {
            border: 1px solid #000;
            cursor: pointer;
            user-select: none;
        }
        .white-key {
            background-color: white;
            height: 100px;
            width: 30px;
        }
        .black-key {
            background-color: black;
            height: 60px;
            width: 20px;
            position: relative;
            margin-left: -10px;
            margin-right: -10px;
            z-index: 1;
        }
        .active {
            background-color: gray;
        }
    </style>
</head>
<body>
    <label for="musical-notes">Select a reference note:</label>
    <select id="ref-note" name="ref-note" onchange="updateRefNote(this)">
        <option value="C">C</option>
        <option value="C#">C#</option>
        <option value="D">D</option>
        <option value="D#">D#</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="F#">F#</option>
        <option value="G">G</option>
        <option value="G#">G#</option>
        <option value="A">A</option>
        <option value="A#">A#</option>
        <option value="B">B</option>
    </select>
    <br>
    <br>
    <label for="tempo-slider">Adjust tempo:</label>
    <input type="range" id="tempo-slider" name="tempo" min="60" max="280" value="120" onchange="updateBPM(this)">
    <br>
    <br>
    <div class="piano">
        <div class="white-key" onclick="toggleNote(0, this)"></div>
        <div class="black-key" onclick="toggleNote(1, this)"></div>
        <div class="white-key active" onclick="toggleNote(2, this)"></div>
        <div class="black-key" onclick="toggleNote(3, this)"></div>
        <div class="white-key active" onclick="toggleNote(4, this)"></div>
        <div class="white-key active" onclick="toggleNote(5, this)"></div>
        <div class="black-key" onclick="toggleNote(6, this)"></div>
        <div class="white-key active" onclick="toggleNote(7, this)"></div>
        <div class="black-key" onclick="toggleNote(8, this)"></div>
        <div class="white-key active" onclick="toggleNote(9, this)"></div>
        <div class="black-key" onclick="toggleNote(10, this)"></div>
        <div class="white-key active" onclick="toggleNote(11, this)"></div>
        <!-- <div class="white-key" onclick="toggleNote(12, this)"></div> -->
    </div>
</body>
<script>
    function toggleNote(index, keyElement) {
        // console.log('Playing note:', note);
        scaleNotes[index][4] = !scaleNotes[index][4];

        // Toggle the active class to change the color of the clicked key
        keyElement.classList.toggle('active');
    }

    function updateRefNote(selectElement) {
        refNote = selectElement.value + '3'; // later, add option to randomize selection of octave
    }

    function updateBPM(sliderElement) {
        bpm = sliderElement.value;
    }

</script>
</script>

<script src=https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.32/Tone.js></script>

<script src=https://cdn.jsdelivr.net/npm/@tonaljs/tonal/browser/tonal.min.js></script>

</br>

<p id="current-note">Current solfege note(s): . . .</p>

<p>Chord Volume <input type="range" id="chordsynthvol-slider" name="chordsynthvol" min="-10" max="10" value="-2" oninput="chordsynthvol(this)"></p>

</br>

<p><button id="play-button">Play/Pause Key Centers w.r.t. Reference Note</button></p>

<p>Reference Note Volume <input type="range" id="refsynthvol-slider" name="refsynthvol" min="-10" max="10" value="0" oninput="refsynthvol(this)"></p>
<p>Resolution Note Volume <input type="range" id="ressynthvol-slider" name="ressynthvol" min="-10" max="10" value ="-6" oninput="ressynthvol(this)"></p>

</br>

<p><button id="melody-button">Play/Pause Melody w.r.t. Key Centers</button></p>

<label for="re-base-input">Number of Rounds Before Returning to Initial:</label>
<select id="re-base-input">
    <!-- <option value="0">N/A</option> -->
    <option value="1">1</option>
    <option value="2" selected>2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>

<script src="create.js"></script>
<script>
    function refsynthvol(t) { refNoteSynth.volume.value = t.value;}
    function ressynthvol(t) { resSynth.volume.value = t.value;}
    function chordsynthvol(t) { chordSynth.volume.value = t.value;}
    function test_fn(t) {

        filter.frequency.value = t.value;
        // //refNoteSynth.volume.value = parseInt(t.value);
        // //refNoteSynth.oscillator.type = "sine";
        // refNoteSynth.set({
        // harmonicity: t.value,
        // //detune: t.value,
        // // envelope: {
        // //     attack: 0.01,
        // // },
        // oscillator: {
        //     type: "square"
        // }
        // filter: {
        //     Q: t.value
        // }
        // });

    }


</script>

</html>

